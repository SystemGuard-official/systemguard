{% extends "base/base.html" %}
{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/edit_profile.css') }}">
{% endblock %}

{% block content %}
<div class="profile-container">
  <div class="profile-card">
    <div class="profile-header">
      <h1>Edit Profile</h1>
      <p>Update your personal information and preferences below</p>
    </div>

    {% include 'ext/message.html' %}

    <form method="POST" action="{{ url_for('edit_profile') }}">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      
      <div class="form-grid">
        <div class="form-group">
          <label for="first_name">
            <i class="fas fa-user"></i>First Name
          </label>
          <input 
            type="text" 
            id="first_name" 
            name="first_name" 
            value="{{ user.first_name }}" 
            required 
            class="form-control" 
            placeholder="Enter your first name"
          >
        </div>

        <div class="form-group">
          <label for="last_name">
            <i class="fas fa-user"></i>Last Name
          </label>
          <input 
            type="text" 
            id="last_name" 
            name="last_name" 
            value="{{ user.last_name }}" 
            required 
            class="form-control" 
            placeholder="Enter your last name"
          >
        </div>
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label for="username">
            <i class="fas fa-at"></i>Username
          </label>
          <input 
            type="text" 
            id="username" 
            name="username" 
            value="{{ user.username }}" 
            required 
            class="form-control" 
            placeholder="Enter your username"
          >
        </div>

        <div class="form-group">
          <label for="email">
            <i class="fas fa-envelope"></i>Email
          </label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            value="{{ user.email }}" 
            required 
            class="form-control" 
            placeholder="Enter your email"
          >
        </div>
      </div>

      <div class="form-group">
        <label for="profession">
          <i class="fas fa-briefcase"></i>Role
        </label>
        <select id="profession" name="profession" class="form-control">
          <option value="Software Developer" {% if user.profession=='Software Developer' %}selected{% endif %}>Software Developer</option>
          <option value="Network Engineer" {% if user.profession=='Network Engineer' %}selected{% endif %}>Network Engineer</option>
          <option value="System Administrator" {% if user.profession=='System Administrator' %}selected{% endif %}>System Administrator</option>
          <option value="Database Administrator" {% if user.profession=='Database Administrator' %}selected{% endif %}>Database Administrator</option>
          <option value="Security Analyst" {% if user.profession=='Security Analyst' %}selected{% endif %}>Security Analyst</option>
        </select>
      </div>

      <div class="checkbox-group">
        <input 
          type="checkbox" 
          id="receive_email_alerts" 
          name="receive_email_alerts"
          {% if user.receive_email_alerts %}checked{% endif %}
        >
        <label for="receive_email_alerts">
          <i class="fas fa-envelope-open"></i> Receive Email Alerts
        </label>
      </div>

      <div class="checkbox-group">
        <input 
          type="checkbox" 
          id="assign_tickets" 
          name="assign_tickets"
          {% if user.assign_tickets %}checked{% endif %}
        >
        <label for="assign_tickets">
          <i class="fas fa-ticket-alt"></i> Opt-in for Ticket Assignment
        </label>
      </div>

      <button type="submit" class="save-button">
        <i class="fas fa-save"></i>
        Save Changes
      </button>
    </form>
  </div>
</div>
{% endblock %}